"use strict";(()=>{var d=(e,n)=>{let o,t=()=>{clearTimeout(o)};return(...s)=>{t(),o=setTimeout(()=>{o=void 0,e(...s)},n)}},i=(e,n)=>{let o=0;return(...t)=>{let c=new Date().getTime();if(!(c-o<n))return o=c,e(...t)}},r=!1,a=d(()=>{r=!1,console.debug("Scrolling reset to",r)},250),l=i(()=>{try{if(console.debug("Scroll event triggered"),r)return;let e=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.documentElement.scrollHeight,o=document.documentElement.clientHeight,t=n===o?0:e/(n-o);console.debug("Scroll event triggered, sending syncScroll message with percentage:",t),chrome.runtime.sendMessage({command:"syncScroll",data:{scrollYPercentage:t}})}catch(e){console.error(`Error in onScrollHandler: ${e}`)}},50);chrome.runtime.onMessage.addListener(e=>{if(e.command==="startSyncTab"&&(console.debug("Content script loaded for tab",e.data),window.addEventListener("scroll",l),console.debug("Scroll event listener registered")),e.command==="stopSyncTab"&&window.removeEventListener("scroll",l),e.command==="syncScrollForTab"){r=!0,console.debug("Received syncScrollForTab message with data",e.data);let{scrollYPercentage:n}=e.data,o=document.documentElement.scrollHeight,t=document.documentElement.clientHeight,c=n*(o-t);window.scrollTo({top:c,behavior:"instant"}),a()}});})();
