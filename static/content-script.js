var y=(E,T)=>{let b;const k=()=>{clearTimeout(b)};return(...x)=>{k(),b=setTimeout(()=>{b=void 0,E(...x)},T)}},z=(E,T)=>{let b=0;return(...k)=>{const p=(new Date()).getTime();if(p-b<T)return;return b=p,E(...k)}},j=!1,A=y(()=>{j=!1,console.debug("Scrolling reset to",j)},250),v=z(()=>{try{if(console.debug("Scroll event triggered"),j)return;const T=(window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0)/document.documentElement.scrollHeight;console.debug("Scroll event triggered, sending syncScroll message with percentage:",T),chrome.runtime.sendMessage({command:"syncScroll",data:{scrollYPercentage:T}})}catch(E){console.error(`Error in onScrollHandler: ${E}`)}},50);chrome.runtime.onMessage.addListener((E)=>{if(E.command==="startSyncTab")console.debug("Content script loaded for tab",E.data),window.addEventListener("scroll",v),console.debug("Scroll event listener registered");if(E.command==="stopSyncTab")window.removeEventListener("scroll",v);if(E.command==="syncScrollForTab"){j=!0,console.debug("Received syncScrollForTab message with data",E.data);const{scrollYPercentage:T}=E.data,b=T*document.documentElement.scrollHeight;window.scrollTo({top:b,behavior:"instant"}),A()}});
