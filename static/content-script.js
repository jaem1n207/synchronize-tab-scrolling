"use strict";(()=>{var d=(e,o)=>{let n,r=()=>{clearTimeout(n)};return(...s)=>{r(),n=setTimeout(()=>{n=void 0,e(...s)},o)}},a=(e,o)=>{let n=0;return(...r)=>{let l=new Date().getTime();if(!(l-n<o))return n=l,e(...r)}},t=!1,i=d(()=>{t=!1,console.debug("Scrolling reset to",t)},250),c=a(()=>{try{if(console.debug("Scroll event triggered"),t)return;let o=(window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0)/document.documentElement.scrollHeight;console.debug("Scroll event triggered, sending syncScroll message with percentage:",o),chrome.runtime.sendMessage({command:"syncScroll",data:{scrollYPercentage:o}})}catch(e){console.error(`Error in onScrollHandler: ${e}`)}},50);chrome.runtime.onMessage.addListener(e=>{if(e.command==="startSyncTab"&&(console.debug("Content script loaded for tab",e.data),window.addEventListener("scroll",c),console.debug("Scroll event listener registered")),e.command==="stopSyncTab"&&window.removeEventListener("scroll",c),e.command==="syncScrollForTab"){t=!0,console.debug("Received syncScrollForTab message with data",e.data);let{scrollYPercentage:o}=e.data,n=o*document.documentElement.scrollHeight;window.scrollTo({top:n,behavior:"instant"}),i()}});})();
